---
title: Graphical Desktops
weight: 1
---

## هدف درس
در این درس با محیط‌های دسکتاپ رایج در لینوکس و روش‌های دسترسی از راه دور به نشست‌های گرافیکی آشنا می‌شویم.

### دانش مورد نیاز
- آشنایی پایه‌ای با X11 و مفاهیم نمایش گرافیکی
- آشنایی با مفاهیم شبکه و دسترسی از راه دور (SSH)

---

### محیط‌های دسکتاپ (Desktop Environments)

وقتی سیستم در حالت گرافیکی بوت می‌شود، صفحهٔ ورود گرافیکی نمایش داده می‌شود و پس از ورود، معمولاً به یکی از "محیط‌های دسکتاپ" هدایت می‌شوید. محیط دسکتاپ یک بستهٔ نرم‌افزاری بزرگ است که پنجره‌ها، منوها، نوتیفیکیشن‌ها و مجموعهٔ برنامه‌های معمول را ارائه می‌دهد.

چند محیط دسکتاپ مشهور:

- **GNOME** — تمرکز بر دسترس‌پذیری و بهره‌وری؛ در بسیاری از توزیع‌ها به‌صورت پیش‌فرض استفاده می‌شود.
- **KDE (Plasma)** — قابل‌سفارشی‌سازی و غنی از امکانات؛ از نسخهٔ 5 با نام Plasma شناخته می‌شود.
- **Xfce** — سبک و کم‌مصرف، برای سیستم‌های با منابع محدود مناسب است.

یک "Window Manager" مسئول نشان‌دادن و مدیریت پنجره‌ها است؛ برخی ترکیب‌ها محیط دسکتاپ کامل و برخی تنها یک مدیر پنجرهٔ ساده ارائه می‌دهند.

---

### نمایش گرافیکی از راه دور

روش‌های مختلفی برای دسترسی به رابط گرافیکی از راه دور وجود دارد. در اینجا روش‌های معمول را خلاصه می‌کنیم:

`X Forwarding (SSH)`

- با فعال‌کردن `X11Forwarding yes` در `/etc/ssh/sshd_config` و اتصال با `ssh -X user@host` می‌توانید برنامه‌های گرافیکی روی سرور را روی کلاینت محلی نمایش دهید.
- این روش امن و مناسب برای اجرای برنامه‌های گرافیکی تک‌جلسه‌ای است.

!!! warning "نکتهٔ امنیتی"
	برای استفادهٔ راه‌دور از X، ترجیحاً از تونل امن SSH به‌جای بازکردن مستقیم دسترسی X استفاده کنید.

`VNC`

- VNC یک پروتکل محبوب برای دسکتاپ از راه دور است (پورت پیش‌فرض 5900 + نمایش). دارای کلاینت و سرور برای پلتفرم‌های مختلف است.
- نقطه‌ضعف VNC معمولاً مربوط به امنیت و رمزنگاری ضعیف است؛ از تونل SSH یا روش‌های رمزنگاری‌شده برای محافظت استفاده کنید.

`Spice`

- پروتکلی مناسب برای اتصال به ماشین‌های مجازی (مثلاً KVM/QEMU). نسبت به VNC عملکرد بهتر و تأخیر کمتری ارائه می‌دهد.

`RDP`

- با استفاده از پیاده‌سازی‌هایی مانند `xrdp` می‌توان از پروتکل RDP (مایکروسافت) استفاده کرد. RDP اغلب رمزنگاری را پشتیبانی می‌کند و کلاینت‌های متنوعی برای آن وجود دارد.

`XDMCP`

- پروتکل قدیمی‌تر برای نمایش صفحهٔ ورود گرافیکی از راه دور (X Display Manager Control Protocol). به‌دلیل مسائل امنیتی و پیکربندی پیچیده کمتر مورد استفادهٔ مستقیم قرار می‌گیرد.

---

### نکات عملی

- برای اجرای یک برنامه روی سرور و نمایش آن روی کلاینت: مطمئن شوید `X11Forwarding yes` فعال است و از `ssh -X server` یا `ssh -Y server` استفاده کنید.
- هنگام استفاده از VNC، سرویس را ترجیحاً فقط روی localhost اجرا و از طریق تونل SSH به آن متصل شوید.
- اگر از ماشین مجازی استفاده می‌کنید و نیاز به کارآیی گرافیکی دارید، به استفاده از `Spice` یا راه‌حل‌های اختصاصی hypervisor توجه کنید.

---

### چک‌لیست (قبل از راه‌اندازی دسترسی راه‌دور)

1. آیا سرویس دسکتاپ/Display Manager نصب و فعال است (مثل GDM, SDDM, LightDM)؟
2. در صورت استفاده از SSH X11 forwarding، `X11Forwarding` در `sshd_config` تنظیم و سرویس SSH ری‌استارت شده است؟
3. آیا برای VNC یا RDP مکانیزم رمزنگاری/تونل امن در نظر گرفته شده است؟
4. آیا محدودیت دسترسی به پورت‌های شبکه و فایروال تنظیم شده است؟

---

### تمرین‌ها

1. در یک ماشین محلی GNOME یا Xfce نصب کنید و Display Manager (مثلاً `gdm` یا `lightdm`) را فعال کنید؛ سپس وضعیت سرویس را بررسی کنید (`systemctl status gdm`).
2. SSH X11 forwarding را فعال کنید و با `ssh -X` یک برنامهٔ گرافیکی ساده (مثل `xeyes`) را از راه دور اجرا کنید.
3. یک جلسهٔ VNC را با اجرا فقط در `localhost` راه‌اندازی کنید و سپس با تونل SSH به آن متصل شوید.

---

!!! example "نکات کلیدی برای آزمون"
	- آشنایی با تفاوت بین Desktop Environment و Window Manager.
	- بدانید X11 forwarding چگونه کار می‌کند و چگونه آن را با `ssh -X` فعال کنید.
	- VNC برای اتصال دسکتاپ از راه دور شناخته‌شده است اما می‌تواند نیاز به لایهٔ امنیتی اضافی داشته باشد.
	- آگاهی از وجود پروتکل‌های دیگر: Spice، RDP و XDMCP (نگاه کلی کافی است).
